from: <https://www.reddit.com/r/SimCity/comments/17aqln/city_size_limitation_perspective_of_a/>

Hi all, I am a developer on the team behind one of the most popular multiphysics simulation software packages used in industry (think fluid dynamics/mechanical/heat transfer/etc. simulations, used on everything from F1 racecars to HVAC system design to turbomachinery), and I am anticipating the release of the new Simcity as much as everyone else here!

However, I am also disappointed with the city size limitation, and wanted to take a shot at explaining why this limitation occurs in the game as it exists thus far (at least from the perspective of a simulator, and from doing some reading on how their simulation engine works), and why the maximum city size is unlikely to be increased.

In simulations of any sort, when you're working with large amounts of data, a relatively slow CPU might be a bottleneck to performance, i.e. the simulation might take longer to perform than with a faster/more parallel CPU, but memory capacity (RAM size) is the limiting factor of the simulation, i.e. if the data requires more space than is available in memory, the simulation will not be able to even run at all (unless you use the hard drive, which is so much slower than memory that the simulation is all but crippled, and this pretty much prevents running the simulation in any reasonable length of time).

The difference between GlassBox and previous SimCity titles is that GlassBox incorporates a heavy amount of simulation between numerous individual entities, all of which have a large array of characteristics/attributes that must each be stored in memory. GlassBox requires quick access to these attributes as it simulates the interactions between all of the entities in the game, so their storage in the system's RAM is essential. This isn't something you can swap on and off the hard drive, or the game's framerate will plummet.

These entities represent everything from the 'energy trucks' delivering power, to individual citizens of the city, to houses/buildings and infrastructure, and so on. Each of these entities also have a very large array of attributes; for example, each individual citizen might have information about his position on the map, his destination if he is walking/driving, the color of his pants, the style and color of his vehicle, his preferences for work, his salary, his preference for housing, his hobbies (i.e. will he want to gamble at the casino?), and so forth. Utility trucks will also have similar attributes, like how much power they are distributing, their position, speed, the direction they plan to take through traffic, and so on.

This is in direct contrast to the style of earlier SimCities, in which the "simulation" was performed at a very high level. Income from taxes could have equaled tax rate * average employment rate * population * average income, and these values would each only need very little memory space. The traffic simulation in these games was also not too in-depth, and certainly wasn't "dynamic," i.e. the pathfinding did not update in response to real-time traffic conditions. With GlassBox, there are so many unique entities that each possess so many more attributes that even "simple" computations like tax income require a large base of data for it to be calculated.

Here's another way to think about it: if SimCity was a solar-system simulator showing the orbit of planets and around a sun, the older SimCity titles would calculate the trajectory of each planet around the sun, save the trajectory, and then just animate the planets moving along these paths with no other requirements. Instead, with GlassBox, the effects of gravity on each planet from every other planet would be computed in real time to give dynamic trajectories that behaved in a much more realistic manner. In order for this more realistic simulation to occur, a lot more data would have to be stored in memory.

Let's consider how much RAM a heavily-underestimated city would require. Imagine a small city of, say, 50,000 population, in which 10,000 of those people are actually either visible as individuals and used for traffic simulations and such, or still considered as "entities" rather than as another number in the population count. Add another, say, 10,000 dynamically-simulated entities for houses, roads, utility buildings, utility vehicles, roads, pathfinding, and so forth. Now assume that each of these 20000 entities possess, say, 200 attributes that are each encoded as 16-bit numerical values (and since 8 bits = 1 byte, each value will consume 2 bytes of memory). Now, let's also assume that out of 200 attributes, the average entity will need to multiply ~30 of these attributes with the same number of attributes belonging to 30 other entities, in order to create dynamic interaction between all of these entities. 30 attributes multiplied by 30 attributes per other entity multiplied by 30 other entities gives us 27000 numerical values that must also be stored per entity, in addition to the 170 attributes that aren't being multiplied (thus not connected to other entities, e.g. color of a person's pants, which isn't dynamically affected by anything else).

The result is that each entity will possess 27170 numerical values that need to be stored in memory as the simulation runs. Multiply this by 20000 entities, and we get 543400000 values that need to be stored. We then multiply this by 2 bytes per value, and find that the result is 543,000,000 bytes of data. Translated into megabytes, this equals 518MB of memory for a rather simple city.

If a system has 2GB of memory, Windows is already using ~1GB, so already half of the memory available is consumed just by GlassBox simulations, not to mention all of the other assets that the game needs to run.

If we double the size of the city boundaries in both directions ('length' and 'width'), and assume that the number of entities required scales linearly with city area, we find that the number of entities will increase 4-fold, so ~2GB of memory will be necessary for just the Glassbox simulation in this larger city.

Since this game isn't being made to be a high-requirement type like Crysis and appeal to only those with high-end computers, and since the maximum addressable memory for a 32-bit application is only 2GB, I am very certain that the lack of any larger city sizes than those already confirmed comes as a direct result of memory limitations inherent to the amount of space Glassbox needs to simulate even a small-sized city. As a result, unless the developers implement a version of Glassbox specific to only large cities (i.e. one with less entity-to-entity interaction to decrease its memory footprint), I very much doubt that the city size in the game will be expanded, even with subsequent updates.

TL;DR: The city size limitation is due to the developers' desire to make this game playable on lower-end systems with only ~2GB system RAM, and also as a result of the 2GB limit imposed on 32-bit applications even if the user has 4GB+ of memory available. Because of this, I am not very hopeful that the maximum city sizes will be increased, at least without significant simplification of the interactions simulated by GlassBox.